@using Data.Models
@model IEnumerable<Data.Models.Quote>

@{
    ViewBag.Title = "Index";
}

<link rel="stylesheet" href="~/Content/Manager.css"/>
<link rel="stylesheet" href="~/Content/Dashboard.css" />

<body>
    <div id="container" class="dashboard">
        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
            <table class="table">
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Origin)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Text)
                    </th>
                    <th></th>
                </tr>

                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Origin)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Text)
                        </td>
                        <td>
                            @{
                                List<Votes> list = new List<Votes>();
                                foreach (var vote in item.Votes)
                                {
                                    if (vote.Rating == 1)
                                    {
                                        list.Add(vote);
                                    }

                                }
                            }
                            Score: @list.Count()
                        </td>
                        <td>
                            Votes: @item.Votes.Count()
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new {id = item.QuoteId}) |
                            @Html.ActionLink("Details", "Details", new {id = item.QuoteId}) |
                            @Html.ActionLink("Delete", "Delete", new {id = item.QuoteId})
                        </td>
                    </tr>
                }
        </table>
    </div>
</body>
